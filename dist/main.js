(()=>{"use strict";class t{static addButtons(t,e){let n=document.createElement("button"),r=document.createElement("div");return n.textContent="Done",n.classList.add("delete"),r.setAttribute("id",`${t}-${e}`),r.appendChild(n),r}static createProject(){let t=document.createElement("div");return t.innerHTML='\n            <form id="project" class="form" onsubmit="return false;"action="">\n                <fieldset>\n                    <legend>PROJECT TASK</legend>\n                    <div>\n                        <label for="proj-name"> Title&nbsp:</label>\n                        <input type="text" placeholder = "Ex. Workout" maxlength="30" name="project-name" id ="proj-name">\n                    </div>\n                    <div>\n                    <label for="proj-desc">Description&nbsp:</label>\n                    <input type="text" placeholder = "Ex. Mon,Wed,Thurs" maxlength="50" name="description" id ="proj-desc">\n                    </div>\n                    <div>\n                    <label for="proj-datel">Date&Time&nbsp:</label>\n                    <input type="datetime-local" name="date"id="proj-datel"required>\n                    </div>\n                    <div>\n                        <button type="submit">Add</button>\n                    </div>\n                </fieldset>\n            </form>\n        ',t}static createTask(){let t=document.createElement("div");return t.innerHTML='\n            <form id="task-form" class="form center" onsubmit="return false;" action="">\n            <fieldset>\n                <legend>TASK</legend>\n                <div>\n                    <label for="title">Title&nbsp:</label>\n                    <input type="text" placeholder = "Ex. Workout" maxlength="30"name="title" id="title" required>\n                </div>\n                <div>\n                    <label for="desc">Description&nbsp:</label>\n                    <input type="text" placeholder = "Ex. Chest Day" maxlength="50" name="description" id="desc"required>\n                </div>\n                <div>\n                <label for="task-datel">Date&Time&nbsp:</label>\n                <input type="datetime-local" name="date"id="task-datel"required>\n                </div>\n                <div>\n                    <label for="notes">Notes&nbsp:</label>\n                    <textarea name="notes" id="notes" placeholder = "Ex. Workout names" maxlength="150" cols="30" rows="10" value = "Didn\'t add note"></textarea>\n                </div>\n                <div>\n                    <label for="projCon">Project&nbsp:</label>\n                    <select name="projList" id="projCon">\n                        <option value="none">None</option>\n                    </select>\n                </div>\n                <div>\n                    <button type="submit">Add</button>\n                </div>\n            </fieldset>\n            </form>\n        ',t}}function e(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function n(t){e(1,arguments);var n=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===n?new Date(t.getTime()):"number"==typeof t||"[object Number]"===n?new Date(t):("string"!=typeof t&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function r(t){e(1,arguments);var r=n(t),i=r.getMonth();return i}Math.pow(10,8);var i=36e5,a=604800,l=31556952,s=2629746,o=7889238;function d(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function c(t){e(1,arguments);var r=n(t);return r.setHours(0,0,0,0),r}var u=864e5;function m(t,n){e(2,arguments);var r=c(t),i=c(n),a=r.getTime()-d(r),l=i.getTime()-d(i);return Math.round((a-l)/u)}function h(t,r){e(2,arguments);var i=n(t),a=n(r),l=i.getFullYear()-a.getFullYear(),s=i.getMonth()-a.getMonth();return 12*l+s}function p(t){e(1,arguments);var r=n(t),i=Math.floor(r.getMonth()/3)+1;return i}function y(t,r){e(2,arguments);var i=n(t),a=n(r),l=i.getFullYear()-a.getFullYear(),s=p(i)-p(a);return 4*l+s}function g(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}var f={};function E(){return f}function b(t,r){var i,a,l,s,o,d,c,u;e(1,arguments);var m=E(),h=g(null!==(i=null!==(a=null!==(l=null!==(s=null==r?void 0:r.weekStartsOn)&&void 0!==s?s:null==r||null===(o=r.locale)||void 0===o||null===(d=o.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==l?l:m.weekStartsOn)&&void 0!==a?a:null===(c=m.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==i?i:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=n(t),y=p.getDay(),f=(y<h?7:0)+y-h;return p.setDate(p.getDate()-f),p.setHours(0,0,0,0),p}var v=6048e5;function k(t,n,r){e(2,arguments);var i=b(t,r),a=b(n,r),l=i.getTime()-d(i),s=a.getTime()-d(a);return Math.round((l-s)/v)}function L(t,r){e(2,arguments);var i=n(t),a=n(r);return i.getFullYear()-a.getFullYear()}function T(t,r){return e(2,arguments),n(t).getTime()-n(r).getTime()}var C={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}};function M(t){return t?C[t]:C.trunc}function D(t,n,r){e(2,arguments);var a=T(t,n)/i;return M(null==r?void 0:r.roundingMethod)(a)}function j(t,n,r){e(2,arguments);var i=T(t,n)/6e4;return M(null==r?void 0:r.roundingMethod)(i)}function S(t,n,r){e(2,arguments);var i=T(t,n)/1e3;return M(null==r?void 0:r.roundingMethod)(i)}class w{static insertData(e){let n=document.createElement("tr");n.setAttribute("class","data-task");for(let r=0;r<e.length;r++){let i=document.createElement("td");4==r?i.appendChild(t.addButtons(e[r][0],e[r][1])):i.textContent=e[r],n.appendChild(i)}return n}static insertHeader(){let t=document.createElement("tr"),e=["Task","Description","Date","Time (24:00)","Status"];for(let n=0;n<e.length;n++){let r=document.createElement("th");r.textContent=e[n],t.appendChild(r)}return t}}class I{static storeTask(t){let e=this.checkList(),n={};n.Entry=t,e.push(n),localStorage.setItem("allEntries",JSON.stringify(e))}static getMonthValue(t){return["january","february","march","april","may","june","july","august","september","october","november","december"][t]}static checkList(){let t=JSON.parse(localStorage.getItem("allEntries"));return null==t&&(t=[]),t}static storeSubTask(t,e){let n=this.checkList();for(let r=0;r<n.length;r++)if("project"==n[r].Entry[0].type&&n[r].Entry[1].number==e){let e={};e.SubEntry=t,n[r].Entry[2].push(e);break}localStorage.setItem("allEntries",JSON.stringify(n))}static updateList(t){this.checkDate();let e=document.getElementById("tbody");if(e.innerHTML="","all"==t){for(let t=0;t<this.checkList().length;t++)e.appendChild(this.enterTDMain(this.checkList()[t].Entry[1].title,this.checkList()[t].Entry[0].date,this.checkList()[t].Entry[1].time,this.checkList()[t].Entry[0].type,this.checkList()[t].Entry[1].number));""==e.innerHTML&&(e.innerHTML="<tr  class='nosel'><td colspan = '3'>NO DATA.</td></tr>")}else if("today"==t){for(let t=0;t<this.checkList().length;t++)this.checkList()[t].Entry[0].date==A.curDate()[0]&&e.appendChild(this.enterTDMain(this.checkList()[t].Entry[1].title,this.checkList()[t].Entry[0].date,this.checkList()[t].Entry[1].time,this.checkList()[t].Entry[0].type,this.checkList()[t].Entry[1].number));""==e.innerHTML&&(e.innerHTML="<tr class='nosel'><td colspan = '3'>NO DATA.</td></tr>")}else{for(let n=0;n<this.checkList().length;n++){let i=r(new Date(this.checkList()[n].Entry[0].date));t==this.getMonthValue(i)&&e.appendChild(this.enterTDMain(this.checkList()[n].Entry[1].title,this.checkList()[n].Entry[0].date,this.checkList()[n].Entry[1].time,this.checkList()[n].Entry[0].type,this.checkList()[n].Entry[1].number))}""==e.innerHTML&&(e.innerHTML="<tr  class='nosel'><td colspan = '3'>NO DATA.</td></tr>")}this.showTaskInfo()}static enterTDMain(t,e,n,r,i){let a=document.createElement("tr"),l=document.createElement("td"),s=document.createElement("td"),o=document.createElement("td"),d=document.createElement("button");return d.textContent=`${t}`,d.setAttribute("id",`${i}`),s.textContent=`${e}`,o.textContent=`${n}`,"task"==r?(a.setAttribute("class","data-task"),d.setAttribute("class","info tasks task-color")):(a.setAttribute("class","data-proj"),d.setAttribute("class","info projs proj-color")),l.appendChild(d),a.appendChild(l),a.appendChild(s),a.appendChild(o),a}static showTaskInfo(){let t=document.querySelectorAll(".info"),e=document.getElementById("result");t.forEach((t=>t.addEventListener("click",(t=>{if(e.innerHTML="",t.target.classList.contains("tasks")){let n=this.checkList().filter((e=>"task"==e.Entry[0].type&&e.Entry[1].number==t.target.id));e.appendChild(this.viewDetails(n[0].Entry))}else if(t.target.classList.contains("projs")){let n=this.checkList().filter((e=>"project"==e.Entry[0].type&&e.Entry[1].number==t.target.id));e.appendChild(this.viewDetails(n[0].Entry))}this.deleteTask()}))))}static setRemainingTime(t){let r=document.createElement("li");return r.innerHTML=`<p><span>Remaining Time</span>:&nbsp&nbsp${function(t,r,i){e(2,arguments);var d,c=0,u=n(t),p=n(r);if(null!=i&&i.unit)"second"===(d=null==i?void 0:i.unit)?c=S(u,p):"minute"===d?c=j(u,p):"hour"===d?c=D(u,p):"day"===d?c=m(u,p):"week"===d?c=k(u,p):"month"===d?c=h(u,p):"quarter"===d?c=y(u,p):"year"===d&&(c=L(u,p));else{var g=S(u,p);Math.abs(g)<60?(c=S(u,p),d="second"):Math.abs(g)<3600?(c=j(u,p),d="minute"):Math.abs(g)<86400&&Math.abs(m(u,p))<1?(c=D(u,p),d="hour"):Math.abs(g)<a&&(c=m(u,p))&&Math.abs(c)<7?d="day":Math.abs(g)<s?(c=k(u,p),d="week"):Math.abs(g)<o?(c=h(u,p),d="month"):Math.abs(g)<l&&y(u,p)<4?(c=y(u,p),d="quarter"):(c=L(u,p),d="year")}return new Intl.RelativeTimeFormat(null==i?void 0:i.locale,{localeMatcher:null==i?void 0:i.localeMatcher,numeric:(null==i?void 0:i.numeric)||"auto",style:null==i?void 0:i.style}).format(c,d)}(new Date(t),new Date)}</p>`,r}static viewDetails(e){let n=document.createElement("div"),r=["title","description","time","date","dateCreated","timeCreated"],i=["Title","Description","Time(24:00)","Date","Date-Created","Time-Created"],a=0,l=document.createElement("ul"),s=document.createElement("h1");n.innerHTML="","task"==e[0].type?s.textContent=`${e[0].type.toUpperCase()}`:s.textContent=`${e[0].type.toUpperCase()} TASK`,l.appendChild(s);for(let t=1;t>=0;t--){for(const n in e[t])if(r.includes(n)){let r=document.createElement("li");r.innerHTML=`<p><span>${i[a]}</span>:&nbsp ${e[t][n]}</p>`,l.appendChild(r),a++}0==t&&l.appendChild(this.setRemainingTime(e[0].date)),n.appendChild(l)}if(n.appendChild(t.addButtons(e[0].type,e[1].number)),"project"==e[0].type){let t=document.createElement("div"),r=document.createElement("table"),i=document.createElement("tbody");if(i.setAttribute("id","subTask"),r.appendChild(w.insertHeader()),e[2].length>0){for(let t=0;t<e[2].length;t++){let n=[e[2][t].SubEntry[1].title,e[2][t].SubEntry[1].description,e[2][t].SubEntry[0].date,e[2][t].SubEntry[1].time,["subtask",e[2][t].SubEntry[1].number]];i.appendChild(w.insertData(n))}r.appendChild(i),t.appendChild(r)}else t.textContent="No task yet.";n.appendChild(t)}return n}static deleteTask(){document.querySelectorAll(".delete").forEach((t=>t.addEventListener("click",(t=>{t.path[1].id;let e=t.path[1].id.split("-"),n=this.checkList();if(2==e.length){let t=n.findIndex((t=>t.Entry[0].type==e[0]&&t.Entry[1].number==e[1]));t>-1&&n.splice(t,1),document.getElementById("result").textContent=""}else{let t=n.findIndex((t=>t.Entry[0].type==e[1]&&t.Entry[1].number==e[2])),r=n[t].Entry[2].findIndex((t=>t.SubEntry[1].number==`${e[1]}-${e[2]}-${e[3]}`));r>-1&&(n[t].Entry[2].splice(r,1),this.viewDetails(n[t].Entry))}localStorage.setItem("allEntries",JSON.stringify(n)),this.updateList("all")}))))}static listCounter(t){return this.checkList().filter((e=>e.Entry[0].type==t)).length}static addProjectName(){let t=document.getElementById("projCon"),e=this.checkList().filter((t=>"project"==t.Entry[0].type));if(this.checkList().length>0&&e.length>0)for(let n=0;n<e.length;n++){let r=document.createElement("option");r.textContent=e[n].Entry[1].title,r.setAttribute("value",e[n].Entry[1].number),t.appendChild(r)}t.addEventListener("change",(t=>{if("none"==t.target.value)A.setMinDate("task",A.curDate()[0]);else if(t.target.value>0)for(let n=0;n<e.length;n++)e[n].Entry[1].number==t.target.value&&A.setMinDate("task",e[n].Entry[0].date)}))}static checkDate(){this.checkList()}}class x{static key=0;constructor(t,e,n,r,i,a){this.title=t,this.description=e,this.date=n,this.note=r,this.time=i,this.number=I.listCounter("task")+1,this.project=a}get infoDetails(){if("none"!==this.project){let t=I.checkList();for(let e=0;e<t.length;e++)"project"==t[e].Entry[0].type&&t[e].Entry[1].number==this.project&&(this.number=`${t[e].Entry[0].type}-${t[e].Entry[1].number}-${t[e].Entry[2].length+1}`)}return[{type:"task",date:this.date,dateCreated:A.curDate()[0],timeCreated:A.curDate()[1],projectVal:this.project},{title:this.title,description:this.description,notes:this.note,time:this.time,number:this.number}]}}class B{constructor(t,e,n,r){this.title=t,this.desc=e,this.date=n,this.time=r,this.number=I.listCounter("project")+1}get infoDetails(){return[{type:"project",date:this.date,dateCreated:A.curDate()[0],timeCreated:A.curDate()[1]},{title:this.title,description:this.desc,time:this.time,number:this.number},[]]}}const A=function(){let t=document.getElementById("result");function e(){let t=new Date;return[t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0"),String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")]}function n(t,e){let n=document.getElementById("proj-datel"),r=document.getElementById("task-datel");"project"==t?n.setAttribute("min",`${e}T00:00`):r.setAttribute("min",`${e}T00:00`)}return{insertTask:function(){n("task",e()[0]),document.getElementById("task-form").addEventListener("submit",(()=>{let e=document.getElementById("title").value,n=document.getElementById("desc").value,r=document.getElementById("task-datel").value,i=document.getElementById("notes").value,a=document.getElementById("projCon").value,l=new x(e,n,r.slice(0,10),i,r.slice(11),a);"none"!==a?(I.storeSubTask(l.infoDetails,a),t.textContent=""):(I.storeTask(l.infoDetails),t.textContent=""),I.updateList("all"),H.closeOverlay()}))},insertProject:function(){n("project",e()[0]),document.getElementById("project").addEventListener("submit",(()=>{let e=document.getElementById("proj-name").value,n=document.getElementById("proj-desc").value,r=document.getElementById("proj-datel").value,i=new B(e,n,r.slice(0,10),r.slice(11));e&&i.infoDetails&&(I.storeTask(i.infoDetails),t.textContent=""),I.updateList("all"),H.closeOverlay()}))},curDate:e,setMinDate:n}}(),H=function(){let e=document.getElementById("result"),n=document.querySelectorAll(".btn");function r(){document.getElementById("overlay").style.display="none"}function i(){document.getElementById("selected").innerHTML="<p>Please select type to add.</p>",document.getElementById("overlay").style.display="block"}return{render:function(){window.addEventListener("click",(t=>{if(t.target.classList.contains("close")){for(let t=0;t<n.length;t++)n[t].classList.remove("active");r()}else"show"==t.target.id&&i()})),n.forEach((e=>e.addEventListener("click",(e=>{let r=document.getElementById("selected");for(let t=0;t<n.length;t++)n[t].id==e.target.id?(e.target.classList.remove("active"),e.target.classList.add("active")):n[t].classList.remove("active");r.innerHTML="","todo-btn"==e.target.id?(e.target.classList.add("active"),r.appendChild(t.createTask()),I.addProjectName(),A.insertTask()):"project-btn"==e.target.id&&(r.appendChild(t.createProject()),A.insertProject())})))),document.getElementById("months").addEventListener("change",(t=>{e.innerHTML="",I.updateList(t.target.value)})),I.updateList("all")},closeOverlay:r,openOverlay:i}}();H.render()})();